<div class="reports-container">

  <!-- Header -->
  <div class="header">
    <div>
      <h1 class="title">Laptop Reports</h1>
      <p class="subtitle">Overview of usage, brands, and assignments.</p>
    </div>
  </div>

  <!-- Loading state -->
  <div *ngIf="loading" class="loading-box">
    Loading laptop dataâ€¦
  </div>

  <ng-container *ngIf="!loading">

    <!-- Summary cards -->
    <div class="summary-grid">
      <div class="summary-card">
        <div class="summary-label">Total Laptops</div>
        <div class="summary-value">{{ totalLaptops }}</div>
      </div>

      <div class="summary-card">
        <div class="summary-label">In Use</div>
        <div class="summary-value">{{ inUseCount }}</div>
      </div>

      <div class="summary-card">
        <div class="summary-label">Available</div>
        <div class="summary-value">{{ availableCount }}</div>
      </div>

      <div class="summary-card">
        <div class="summary-label">In Repair</div>
        <div class="summary-value">{{ repairCount }}</div>
      </div>
    </div>

    <!-- Charts/sections -->
    <div class="sections-grid">

      <!-- Status distribution -->
      <div class="section">
        <h2 class="section-title">By Status</h2>
        <div class="bar-list" *ngIf="statusCounts.length; else noStatus">
          <div *ngFor="let s of statusCounts" class="bar-row">
            <div class="bar-label">{{ s.label }}</div>
            <div class="bar-track">
              <div
                class="bar-fill status"
                [style.width.%]="(s.value / getMaxValue(statusCounts)) * 100"
              ></div>
            </div>
            <div class="bar-value">{{ s.value }}</div>
          </div>
        </div>
        <ng-template #noStatus>
          <p class="empty-text">No status data available.</p>
        </ng-template>
      </div>

      <!-- Brand distribution -->
      <div class="section">
        <h2 class="section-title">By Brand</h2>
        <div class="bar-list" *ngIf="brandCounts.length; else noBrand">
          <div *ngFor="let b of brandCounts" class="bar-row">
            <div class="bar-label">{{ b.label }}</div>
            <div class="bar-track">
              <div
                class="bar-fill brand"
                [style.width.%]="(b.value / getMaxValue(brandCounts)) * 100"
              ></div>
            </div>
            <div class="bar-value">{{ b.value }}</div>
          </div>
        </div>
        <ng-template #noBrand>
          <p class="empty-text">No brand data available.</p>
        </ng-template>
      </div>

      <!-- Department distribution -->
      <div class="section full-width">
        <h2 class="section-title">By Department</h2>
        <div class="bar-list" *ngIf="departmentCounts.length; else noDept">
          <div *ngFor="let d of departmentCounts" class="bar-row">
            <div class="bar-label">{{ d.label }}</div>
            <div class="bar-track">
              <div
                class="bar-fill dept"
                [style.width.%]="(d.value / getMaxValue(departmentCounts)) * 100"
              ></div>
            </div>
            <div class="bar-value">{{ d.value }}</div>
          </div>
        </div>
        <ng-template #noDept>
          <p class="empty-text">No department data available.</p>
        </ng-template>
      </div>

    </div>

  </ng-container>
</div>
